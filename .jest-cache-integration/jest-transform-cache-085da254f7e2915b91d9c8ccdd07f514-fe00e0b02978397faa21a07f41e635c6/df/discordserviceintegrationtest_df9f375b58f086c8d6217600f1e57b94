1feb73ce9fb22adefbe7ce1bef14a315
import { jest } from '@jest/globals';
import { DiscordClientService } from '../../src/services/implementations/discord-client-service.js';
describe('Discord Service Integration', () => {
  let discordService;
  let mockClient;
  let mockChannel;
  let mockGuild;
  beforeEach(() => {
    mockChannel = {
      send: jest.fn().mockResolvedValue({
        id: 'message-123'
      }),
      id: 'channel-123',
      name: 'test-channel',
      guild: {
        id: 'guild-123'
      },
      isTextBased: jest.fn().mockReturnValue(true)
    };
    mockGuild = {
      id: 'guild-123',
      name: 'Test Guild'
    };
    mockClient = {
      login: jest.fn().mockResolvedValue(),
      channels: {
        fetch: jest.fn().mockResolvedValue(mockChannel)
      },
      guilds: {
        fetch: jest.fn().mockResolvedValue(mockGuild)
      },
      on: jest.fn(),
      removeListener: jest.fn()
    };
    discordService = new DiscordClientService(mockClient);
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  describe('login functionality', () => {
    it('should login successfully', async () => {
      const token = 'test-token';
      await discordService.login(token);
      expect(mockClient.login).toHaveBeenCalledWith(token);
    });
    it('should handle login errors gracefully', async () => {
      const connectionError = new Error('Invalid token');
      mockClient.login.mockRejectedValue(connectionError);
      await expect(discordService.login('invalid-token')).rejects.toThrow('Invalid token');
    });
  });
  describe('message sending', () => {
    it('should send text message successfully', async () => {
      const result = await discordService.sendMessage('channel-123', 'Hello, World!');
      expect(mockClient.channels.fetch).toHaveBeenCalledWith('channel-123');
      expect(mockChannel.isTextBased).toHaveBeenCalled();
      expect(mockChannel.send).toHaveBeenCalledWith('Hello, World!');
      expect(result).toEqual({
        id: 'message-123'
      });
    });
    it('should handle channel fetch errors', async () => {
      mockClient.channels.fetch.mockRejectedValue(new Error('Channel not found'));
      await expect(discordService.sendMessage('invalid-channel', 'Test')).rejects.toThrow('Channel not found');
    });
    it('should handle non-text channels', async () => {
      mockChannel.isTextBased.mockReturnValue(false);
      await expect(discordService.sendMessage('channel-123', 'Test')).rejects.toThrow('Channel channel-123 is not a valid text channel');
    });
    it('should handle null channel response', async () => {
      mockClient.channels.fetch.mockResolvedValue(null);
      await expect(discordService.sendMessage('channel-123', 'Test')).rejects.toThrow('Channel channel-123 is not a valid text channel');
    });
    it('should handle message send errors', async () => {
      const sendError = new Error('Missing permissions');
      mockChannel.send.mockRejectedValue(sendError);
      await expect(discordService.sendMessage('channel-123', 'Test')).rejects.toThrow('Missing permissions');
    });
  });
  describe('channel operations', () => {
    it('should fetch channel successfully', async () => {
      const result = await discordService.fetchChannel('channel-123');
      expect(mockClient.channels.fetch).toHaveBeenCalledWith('channel-123');
      expect(result).toBe(mockChannel);
    });
    it('should handle channel fetch errors', async () => {
      const fetchError = new Error('Unknown channel');
      mockClient.channels.fetch.mockRejectedValue(fetchError);
      await expect(discordService.fetchChannel('invalid-channel')).rejects.toThrow('Unknown channel');
    });
  });
  describe('guild operations', () => {
    it('should fetch guild successfully', async () => {
      const result = await discordService.fetchGuild('guild-123');
      expect(mockClient.guilds.fetch).toHaveBeenCalledWith('guild-123');
      expect(result).toBe(mockGuild);
    });
    it('should handle guild fetch errors', async () => {
      const fetchError = new Error('Unknown guild');
      mockClient.guilds.fetch.mockRejectedValue(fetchError);
      await expect(discordService.fetchGuild('invalid-guild')).rejects.toThrow('Unknown guild');
    });
  });
  describe('event handling', () => {
    it('should register message handler', () => {
      const mockHandler = jest.fn();
      discordService.onMessage(mockHandler);
      expect(mockClient.on).toHaveBeenCalledWith('messageCreate', expect.any(Function));
    });
    it('should register ready handler', () => {
      const mockHandler = jest.fn();
      discordService.onReady(mockHandler);
      expect(mockClient.on).toHaveBeenCalledWith('ready', expect.any(Function));
    });
    it('should register error handler', () => {
      const mockHandler = jest.fn();
      discordService.onError(mockHandler);
      expect(mockClient.on).toHaveBeenCalledWith('error', expect.any(Function));
    });
    it('should handle message events with error handling', () => {
      const mockHandler = jest.fn(() => {
        throw new Error('Handler error');
      });
      discordService.onMessage(mockHandler);

      // Get the wrapped handler that was registered
      const wrappedHandler = mockClient.on.mock.calls.find(call => call[0] === 'messageCreate')[1];

      // Should not throw when handler throws
      expect(() => wrappedHandler({
        content: 'test'
      })).not.toThrow();
      expect(mockHandler).toHaveBeenCalledWith({
        content: 'test'
      });
    });
  });
  describe('bulk operations', () => {
    it('should handle multiple messages sequentially', async () => {
      const messages = ['Message 1', 'Message 2', 'Message 3'];
      const results = await Promise.all(messages.map(msg => discordService.sendMessage('channel-123', msg)));
      expect(results).toHaveLength(3);
      expect(mockChannel.send).toHaveBeenCalledTimes(3);
      expect(mockChannel.send).toHaveBeenNthCalledWith(1, 'Message 1');
      expect(mockChannel.send).toHaveBeenNthCalledWith(2, 'Message 2');
      expect(mockChannel.send).toHaveBeenNthCalledWith(3, 'Message 3');
    });
    it('should handle partial failures in bulk operations', async () => {
      mockChannel.send.mockResolvedValueOnce({
        id: 'msg-1'
      }).mockRejectedValueOnce(new Error('Rate limited')).mockResolvedValueOnce({
        id: 'msg-3'
      });
      const promises = [discordService.sendMessage('channel-123', 'Success 1'), discordService.sendMessage('channel-123', 'Fail'), discordService.sendMessage('channel-123', 'Success 2')];
      const results = await Promise.allSettled(promises);
      expect(results[0].status).toBe('fulfilled');
      expect(results[1].status).toBe('rejected');
      expect(results[2].status).toBe('fulfilled');
    });
  });
  describe('edge cases and error handling', () => {
    it('should handle malformed message content', async () => {
      await expect(discordService.sendMessage('channel-123', null)).resolves.toEqual({
        id: 'message-123'
      });
      expect(mockChannel.send).toHaveBeenCalledWith(null);
    });
    it('should handle very long channel IDs', async () => {
      const longChannelId = '1'.repeat(100);
      await discordService.sendMessage(longChannelId, 'Test');
      expect(mockClient.channels.fetch).toHaveBeenCalledWith(longChannelId);
    });
    it('should handle concurrent requests to same channel', async () => {
      const promises = Array.from({
        length: 10
      }, (_, i) => discordService.sendMessage('channel-123', `Message ${i}`));
      const results = await Promise.all(promises);
      expect(results).toHaveLength(10);
      expect(mockClient.channels.fetch).toHaveBeenCalledTimes(10);
      expect(mockChannel.send).toHaveBeenCalledTimes(10);
    });
  });
  describe('service state management', () => {
    it('should maintain event handler references', () => {
      const handler1 = jest.fn();
      const handler2 = jest.fn();
      discordService.onMessage(handler1);
      discordService.onMessage(handler2);
      expect(discordService.eventHandlers).toBeDefined();
      expect(mockClient.on).toHaveBeenCalledTimes(2);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqZXN0IiwiRGlzY29yZENsaWVudFNlcnZpY2UiLCJkZXNjcmliZSIsImRpc2NvcmRTZXJ2aWNlIiwibW9ja0NsaWVudCIsIm1vY2tDaGFubmVsIiwibW9ja0d1aWxkIiwiYmVmb3JlRWFjaCIsInNlbmQiLCJmbiIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiaWQiLCJuYW1lIiwiZ3VpbGQiLCJpc1RleHRCYXNlZCIsIm1vY2tSZXR1cm5WYWx1ZSIsImxvZ2luIiwiY2hhbm5lbHMiLCJmZXRjaCIsImd1aWxkcyIsIm9uIiwicmVtb3ZlTGlzdGVuZXIiLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJ0b2tlbiIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiY29ubmVjdGlvbkVycm9yIiwiRXJyb3IiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsInJlamVjdHMiLCJ0b1Rocm93IiwicmVzdWx0Iiwic2VuZE1lc3NhZ2UiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9FcXVhbCIsInNlbmRFcnJvciIsImZldGNoQ2hhbm5lbCIsInRvQmUiLCJmZXRjaEVycm9yIiwiZmV0Y2hHdWlsZCIsIm1vY2tIYW5kbGVyIiwib25NZXNzYWdlIiwiYW55IiwiRnVuY3Rpb24iLCJvblJlYWR5Iiwib25FcnJvciIsIndyYXBwZWRIYW5kbGVyIiwibW9jayIsImNhbGxzIiwiZmluZCIsImNhbGwiLCJjb250ZW50Iiwibm90IiwibWVzc2FnZXMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsIm1zZyIsInRvSGF2ZUxlbmd0aCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInRvSGF2ZUJlZW5OdGhDYWxsZWRXaXRoIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwibW9ja1JlamVjdGVkVmFsdWVPbmNlIiwicHJvbWlzZXMiLCJhbGxTZXR0bGVkIiwic3RhdHVzIiwicmVzb2x2ZXMiLCJsb25nQ2hhbm5lbElkIiwicmVwZWF0IiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiXyIsImkiLCJoYW5kbGVyMSIsImhhbmRsZXIyIiwiZXZlbnRIYW5kbGVycyIsInRvQmVEZWZpbmVkIl0sInNvdXJjZXMiOlsiZGlzY29yZC1zZXJ2aWNlLWludGVncmF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgRGlzY29yZENsaWVudFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvaW1wbGVtZW50YXRpb25zL2Rpc2NvcmQtY2xpZW50LXNlcnZpY2UuanMnO1xuXG5kZXNjcmliZSgnRGlzY29yZCBTZXJ2aWNlIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgZGlzY29yZFNlcnZpY2U7XG4gIGxldCBtb2NrQ2xpZW50O1xuICBsZXQgbW9ja0NoYW5uZWw7XG4gIGxldCBtb2NrR3VpbGQ7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgbW9ja0NoYW5uZWwgPSB7XG4gICAgICBzZW5kOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBpZDogJ21lc3NhZ2UtMTIzJyB9KSxcbiAgICAgIGlkOiAnY2hhbm5lbC0xMjMnLFxuICAgICAgbmFtZTogJ3Rlc3QtY2hhbm5lbCcsXG4gICAgICBndWlsZDogeyBpZDogJ2d1aWxkLTEyMycgfSxcbiAgICAgIGlzVGV4dEJhc2VkOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHRydWUpLFxuICAgIH07XG5cbiAgICBtb2NrR3VpbGQgPSB7XG4gICAgICBpZDogJ2d1aWxkLTEyMycsXG4gICAgICBuYW1lOiAnVGVzdCBHdWlsZCcsXG4gICAgfTtcblxuICAgIG1vY2tDbGllbnQgPSB7XG4gICAgICBsb2dpbjogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCksXG4gICAgICBjaGFubmVsczoge1xuICAgICAgICBmZXRjaDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaGFubmVsKSxcbiAgICAgIH0sXG4gICAgICBndWlsZHM6IHtcbiAgICAgICAgZmV0Y2g6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrR3VpbGQpLFxuICAgICAgfSxcbiAgICAgIG9uOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIH07XG5cbiAgICBkaXNjb3JkU2VydmljZSA9IG5ldyBEaXNjb3JkQ2xpZW50U2VydmljZShtb2NrQ2xpZW50KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvZ2luIGZ1bmN0aW9uYWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBsb2dpbiBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9ICd0ZXN0LXRva2VuJztcblxuICAgICAgYXdhaXQgZGlzY29yZFNlcnZpY2UubG9naW4odG9rZW4pO1xuXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5sb2dpbikudG9IYXZlQmVlbkNhbGxlZFdpdGgodG9rZW4pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbG9naW4gZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKTtcbiAgICAgIG1vY2tDbGllbnQubG9naW4ubW9ja1JlamVjdGVkVmFsdWUoY29ubmVjdGlvbkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvcmRTZXJ2aWNlLmxvZ2luKCdpbnZhbGlkLXRva2VuJykpLnJlamVjdHMudG9UaHJvdygnSW52YWxpZCB0b2tlbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbWVzc2FnZSBzZW5kaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2VuZCB0ZXh0IG1lc3NhZ2Ugc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY29yZFNlcnZpY2Uuc2VuZE1lc3NhZ2UoJ2NoYW5uZWwtMTIzJywgJ0hlbGxvLCBXb3JsZCEnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuY2hhbm5lbHMuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdjaGFubmVsLTEyMycpO1xuICAgICAgZXhwZWN0KG1vY2tDaGFubmVsLmlzVGV4dEJhc2VkKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NoYW5uZWwuc2VuZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0hlbGxvLCBXb3JsZCEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoeyBpZDogJ21lc3NhZ2UtMTIzJyB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNoYW5uZWwgZmV0Y2ggZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NsaWVudC5jaGFubmVscy5mZXRjaC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0NoYW5uZWwgbm90IGZvdW5kJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGlzY29yZFNlcnZpY2Uuc2VuZE1lc3NhZ2UoJ2ludmFsaWQtY2hhbm5lbCcsICdUZXN0JykpLnJlamVjdHMudG9UaHJvdygnQ2hhbm5lbCBub3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vbi10ZXh0IGNoYW5uZWxzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NoYW5uZWwuaXNUZXh0QmFzZWQubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvcmRTZXJ2aWNlLnNlbmRNZXNzYWdlKCdjaGFubmVsLTEyMycsICdUZXN0JykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgJ0NoYW5uZWwgY2hhbm5lbC0xMjMgaXMgbm90IGEgdmFsaWQgdGV4dCBjaGFubmVsJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgY2hhbm5lbCByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDbGllbnQuY2hhbm5lbHMuZmV0Y2gubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkaXNjb3JkU2VydmljZS5zZW5kTWVzc2FnZSgnY2hhbm5lbC0xMjMnLCAnVGVzdCcpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgICdDaGFubmVsIGNoYW5uZWwtMTIzIGlzIG5vdCBhIHZhbGlkIHRleHQgY2hhbm5lbCdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtZXNzYWdlIHNlbmQgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VuZEVycm9yID0gbmV3IEVycm9yKCdNaXNzaW5nIHBlcm1pc3Npb25zJyk7XG4gICAgICBtb2NrQ2hhbm5lbC5zZW5kLm1vY2tSZWplY3RlZFZhbHVlKHNlbmRFcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkaXNjb3JkU2VydmljZS5zZW5kTWVzc2FnZSgnY2hhbm5lbC0xMjMnLCAnVGVzdCcpKS5yZWplY3RzLnRvVGhyb3coJ01pc3NpbmcgcGVybWlzc2lvbnMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NoYW5uZWwgb3BlcmF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZldGNoIGNoYW5uZWwgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGlzY29yZFNlcnZpY2UuZmV0Y2hDaGFubmVsKCdjaGFubmVsLTEyMycpO1xuXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5jaGFubmVscy5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2NoYW5uZWwtMTIzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tDaGFubmVsKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNoYW5uZWwgZmV0Y2ggZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmV0Y2hFcnJvciA9IG5ldyBFcnJvcignVW5rbm93biBjaGFubmVsJyk7XG4gICAgICBtb2NrQ2xpZW50LmNoYW5uZWxzLmZldGNoLm1vY2tSZWplY3RlZFZhbHVlKGZldGNoRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGlzY29yZFNlcnZpY2UuZmV0Y2hDaGFubmVsKCdpbnZhbGlkLWNoYW5uZWwnKSkucmVqZWN0cy50b1Rocm93KCdVbmtub3duIGNoYW5uZWwnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2d1aWxkIG9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBmZXRjaCBndWlsZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkaXNjb3JkU2VydmljZS5mZXRjaEd1aWxkKCdndWlsZC0xMjMnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZ3VpbGRzLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZ3VpbGQtMTIzJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tHdWlsZCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBndWlsZCBmZXRjaCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmZXRjaEVycm9yID0gbmV3IEVycm9yKCdVbmtub3duIGd1aWxkJyk7XG4gICAgICBtb2NrQ2xpZW50Lmd1aWxkcy5mZXRjaC5tb2NrUmVqZWN0ZWRWYWx1ZShmZXRjaEVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRpc2NvcmRTZXJ2aWNlLmZldGNoR3VpbGQoJ2ludmFsaWQtZ3VpbGQnKSkucmVqZWN0cy50b1Rocm93KCdVbmtub3duIGd1aWxkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdldmVudCBoYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIG1lc3NhZ2UgaGFuZGxlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tIYW5kbGVyID0gamVzdC5mbigpO1xuXG4gICAgICBkaXNjb3JkU2VydmljZS5vbk1lc3NhZ2UobW9ja0hhbmRsZXIpO1xuXG4gICAgICBleHBlY3QobW9ja0NsaWVudC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ21lc3NhZ2VDcmVhdGUnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIHJlYWR5IGhhbmRsZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrSGFuZGxlciA9IGplc3QuZm4oKTtcblxuICAgICAgZGlzY29yZFNlcnZpY2Uub25SZWFkeShtb2NrSGFuZGxlcik7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50Lm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncmVhZHknLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlZ2lzdGVyIGVycm9yIGhhbmRsZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrSGFuZGxlciA9IGplc3QuZm4oKTtcblxuICAgICAgZGlzY29yZFNlcnZpY2Uub25FcnJvcihtb2NrSGFuZGxlcik7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50Lm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZXJyb3InLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtZXNzYWdlIGV2ZW50cyB3aXRoIGVycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0hhbmRsZXIgPSBqZXN0LmZuKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIYW5kbGVyIGVycm9yJyk7XG4gICAgICB9KTtcblxuICAgICAgZGlzY29yZFNlcnZpY2Uub25NZXNzYWdlKG1vY2tIYW5kbGVyKTtcblxuICAgICAgLy8gR2V0IHRoZSB3cmFwcGVkIGhhbmRsZXIgdGhhdCB3YXMgcmVnaXN0ZXJlZFxuICAgICAgY29uc3Qgd3JhcHBlZEhhbmRsZXIgPSBtb2NrQ2xpZW50Lm9uLm1vY2suY2FsbHMuZmluZChjYWxsID0+IGNhbGxbMF0gPT09ICdtZXNzYWdlQ3JlYXRlJylbMV07XG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgd2hlbiBoYW5kbGVyIHRocm93c1xuICAgICAgZXhwZWN0KCgpID0+IHdyYXBwZWRIYW5kbGVyKHsgY29udGVudDogJ3Rlc3QnIH0pKS5ub3QudG9UaHJvdygpO1xuICAgICAgZXhwZWN0KG1vY2tIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IGNvbnRlbnQ6ICd0ZXN0JyB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1bGsgb3BlcmF0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBtZXNzYWdlcyBzZXF1ZW50aWFsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IFsnTWVzc2FnZSAxJywgJ01lc3NhZ2UgMicsICdNZXNzYWdlIDMnXTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKG1lc3NhZ2VzLm1hcChtc2cgPT4gZGlzY29yZFNlcnZpY2Uuc2VuZE1lc3NhZ2UoJ2NoYW5uZWwtMTIzJywgbXNnKSkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KG1vY2tDaGFubmVsLnNlbmQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygzKTtcbiAgICAgIGV4cGVjdChtb2NrQ2hhbm5lbC5zZW5kKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aCgxLCAnTWVzc2FnZSAxJyk7XG4gICAgICBleHBlY3QobW9ja0NoYW5uZWwuc2VuZCkudG9IYXZlQmVlbk50aENhbGxlZFdpdGgoMiwgJ01lc3NhZ2UgMicpO1xuICAgICAgZXhwZWN0KG1vY2tDaGFubmVsLnNlbmQpLnRvSGF2ZUJlZW5OdGhDYWxsZWRXaXRoKDMsICdNZXNzYWdlIDMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcnRpYWwgZmFpbHVyZXMgaW4gYnVsayBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NoYW5uZWwuc2VuZFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgaWQ6ICdtc2ctMScgfSlcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ1JhdGUgbGltaXRlZCcpKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgaWQ6ICdtc2ctMycgfSk7XG5cbiAgICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgICBkaXNjb3JkU2VydmljZS5zZW5kTWVzc2FnZSgnY2hhbm5lbC0xMjMnLCAnU3VjY2VzcyAxJyksXG4gICAgICAgIGRpc2NvcmRTZXJ2aWNlLnNlbmRNZXNzYWdlKCdjaGFubmVsLTEyMycsICdGYWlsJyksXG4gICAgICAgIGRpc2NvcmRTZXJ2aWNlLnNlbmRNZXNzYWdlKCdjaGFubmVsLTEyMycsICdTdWNjZXNzIDInKSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocHJvbWlzZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0c1swXS5zdGF0dXMpLnRvQmUoJ2Z1bGZpbGxlZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMV0uc3RhdHVzKS50b0JlKCdyZWplY3RlZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdHNbMl0uc3RhdHVzKS50b0JlKCdmdWxmaWxsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2VkZ2UgY2FzZXMgYW5kIGVycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1hbGZvcm1lZCBtZXNzYWdlIGNvbnRlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QoZGlzY29yZFNlcnZpY2Uuc2VuZE1lc3NhZ2UoJ2NoYW5uZWwtMTIzJywgbnVsbCkpLnJlc29sdmVzLnRvRXF1YWwoeyBpZDogJ21lc3NhZ2UtMTIzJyB9KTtcblxuICAgICAgZXhwZWN0KG1vY2tDaGFubmVsLnNlbmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG51bGwpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsb25nIGNoYW5uZWwgSURzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbG9uZ0NoYW5uZWxJZCA9ICcxJy5yZXBlYXQoMTAwKTtcblxuICAgICAgYXdhaXQgZGlzY29yZFNlcnZpY2Uuc2VuZE1lc3NhZ2UobG9uZ0NoYW5uZWxJZCwgJ1Rlc3QnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuY2hhbm5lbHMuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGxvbmdDaGFubmVsSWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29uY3VycmVudCByZXF1ZXN0cyB0byBzYW1lIGNoYW5uZWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwIH0sIChfLCBpKSA9PiBkaXNjb3JkU2VydmljZS5zZW5kTWVzc2FnZSgnY2hhbm5lbC0xMjMnLCBgTWVzc2FnZSAke2l9YCkpO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDEwKTtcbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmNoYW5uZWxzLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMTApO1xuICAgICAgZXhwZWN0KG1vY2tDaGFubmVsLnNlbmQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZXJ2aWNlIHN0YXRlIG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBldmVudCBoYW5kbGVyIHJlZmVyZW5jZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGVyMSA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IGhhbmRsZXIyID0gamVzdC5mbigpO1xuXG4gICAgICBkaXNjb3JkU2VydmljZS5vbk1lc3NhZ2UoaGFuZGxlcjEpO1xuICAgICAgZGlzY29yZFNlcnZpY2Uub25NZXNzYWdlKGhhbmRsZXIyKTtcblxuICAgICAgZXhwZWN0KGRpc2NvcmRTZXJ2aWNlLmV2ZW50SGFuZGxlcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobW9ja0NsaWVudC5vbikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxJQUFJLFFBQVEsZUFBZTtBQUNwQyxTQUFTQyxvQkFBb0IsUUFBUSw4REFBOEQ7QUFFbkdDLFFBQVEsQ0FBQyw2QkFBNkIsRUFBRSxNQUFNO0VBQzVDLElBQUlDLGNBQWM7RUFDbEIsSUFBSUMsVUFBVTtFQUNkLElBQUlDLFdBQVc7RUFDZixJQUFJQyxTQUFTO0VBRWJDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZGLFdBQVcsR0FBRztNQUNaRyxJQUFJLEVBQUVSLElBQUksQ0FBQ1MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUM7UUFBRUMsRUFBRSxFQUFFO01BQWMsQ0FBQyxDQUFDO01BQ3hEQSxFQUFFLEVBQUUsYUFBYTtNQUNqQkMsSUFBSSxFQUFFLGNBQWM7TUFDcEJDLEtBQUssRUFBRTtRQUFFRixFQUFFLEVBQUU7TUFBWSxDQUFDO01BQzFCRyxXQUFXLEVBQUVkLElBQUksQ0FBQ1MsRUFBRSxD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