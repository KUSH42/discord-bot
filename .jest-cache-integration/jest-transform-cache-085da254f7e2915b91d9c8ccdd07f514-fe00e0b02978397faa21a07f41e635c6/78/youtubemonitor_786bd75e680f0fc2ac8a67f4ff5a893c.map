{"version":3,"names":["cov_1mzgruv3rj","actualCoverage","config","pathToFileURL","Configuration","DependencyContainer","setupProductionServices","createShutdownHandler","s","main","f","container","logger","configuration","resolve","info","monitorApp","start","shutdownHandler","process","on","error","reason","promise","b","console","dispose","disposeError","import","meta","url","argv","href","catch","exit"],"sources":["youtube-monitor.js"],"sourcesContent":["// youtube-monitor.js - Standalone YouTube Monitor Entry Point\n// © 2025 Marco Keller. All rights reserved. This software and its content are proprietary and confidential. Unauthorized reproduction or distribution is strictly prohibited.\n\nimport { config } from '@dotenvx/dotenvx';\nimport { pathToFileURL } from 'url';\n\n// Infrastructure\nimport { Configuration } from './src/infrastructure/configuration.js';\nimport { DependencyContainer } from './src/infrastructure/dependency-container.js';\n\n// Setup\nimport { setupProductionServices, createShutdownHandler } from './src/setup/production-setup.js';\n\n// Load environment variables with encryption support\nconfig();\n\n/**\n * Standalone YouTube Monitor application\n */\nasync function main() {\n  let container, logger;\n\n  try {\n    // Initialize configuration\n    const configuration = new Configuration();\n\n    // Create dependency container\n    container = new DependencyContainer();\n\n    // Set up all services\n    await setupProductionServices(container, configuration);\n\n    // Get logger\n    logger = container.resolve('logger');\n    logger.info('🎬 Starting YouTube Monitor...');\n\n    // Start only the YouTube Monitor application\n    const monitorApp = container.resolve('monitorApplication');\n    await monitorApp.start();\n\n    // Set up graceful shutdown\n    const shutdownHandler = createShutdownHandler(container);\n    process.on('SIGTERM', () => shutdownHandler('SIGTERM'));\n    process.on('SIGINT', () => shutdownHandler('SIGINT'));\n\n    logger.info('✅ YouTube Monitor started successfully');\n\n    // Keep the process alive\n    process.on('uncaughtException', (error) => {\n      logger.error('Uncaught Exception:', error);\n      shutdownHandler('uncaughtException');\n    });\n\n    process.on('unhandledRejection', (reason, promise) => {\n      logger.error('Unhandled Rejection at:', promise, 'reason:', reason);\n      shutdownHandler('unhandledRejection');\n    });\n  } catch (error) {\n    if (logger) {\n      logger.error('❌ Failed to start YouTube Monitor:', error);\n    } else {\n      console.error('❌ Failed to start YouTube Monitor:', error);\n    }\n\n    if (container) {\n      try {\n        await container.dispose();\n      } catch (disposeError) {\n        console.error('Error during cleanup:', disposeError);\n      }\n    }\n\n    // Don't call process.exit here - let the caller handle it\n    throw error;\n  }\n}\n\n// Only run when executed directly (not imported)\nif (import.meta.url === pathToFileURL(process.argv[1]).href) {\n  main().catch((error) => {\n    console.error('Fatal error:', error);\n    process.exit(1);\n  });\n}\n\n// Export for testing and integration\nexport { main };\n"],"mappings":"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","ignoreList":[]}