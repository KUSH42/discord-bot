{"version":3,"names":["cov_25g1z2d668","actualCoverage","config","pathToFileURL","Configuration","DependencyContainer","setupProductionServices","createShutdownHandler","s","main","f","container","logger","configuration","resolve","info","xUser","get","b","Error","scraperApp","start","shutdownHandler","process","on","error","reason","promise","stack","console","dispose","disposeError","import","meta","url","argv","href","catch","exit"],"sources":["x-scraper.js"],"sourcesContent":["// x-scraper.js - Standalone X (Twitter) Scraper Entry Point\n// © 2025 Marco Keller. All rights reserved. This software and its content are proprietary and confidential. Unauthorized reproduction or distribution is strictly prohibited.\n\nimport { config } from '@dotenvx/dotenvx';\nimport { pathToFileURL } from 'url';\n\n// Infrastructure\nimport { Configuration } from './src/infrastructure/configuration.js';\nimport { DependencyContainer } from './src/infrastructure/dependency-container.js';\n\n// Setup\nimport { setupProductionServices, createShutdownHandler } from './src/setup/production-setup.js';\n\n// Load environment variables with encryption support\nconfig();\n\n/**\n * Standalone X (Twitter) Scraper application\n */\nasync function main() {\n  let container, logger;\n\n  try {\n    // Initialize configuration\n    const configuration = new Configuration();\n\n    // Create dependency container\n    container = new DependencyContainer();\n\n    // Set up all services\n    await setupProductionServices(container, configuration);\n\n    // Get logger\n    logger = container.resolve('logger');\n    logger.info('🐦 Starting X Scraper...');\n\n    // Verify X configuration\n    const xUser = configuration.get('X_USER_HANDLE');\n    if (!xUser) {\n      throw new Error('X_USER_HANDLE not configured. X Scraper cannot start without a target user.');\n    }\n\n    // Start only the X Scraper application\n    const scraperApp = container.resolve('scraperApplication');\n    await scraperApp.start();\n\n    // Set up graceful shutdown\n    const shutdownHandler = createShutdownHandler(container);\n    process.on('SIGTERM', () => shutdownHandler('SIGTERM'));\n    process.on('SIGINT', () => shutdownHandler('SIGINT'));\n\n    logger.info(`✅ X Scraper started successfully, monitoring @${xUser}`);\n\n    // Keep the process alive\n    process.on('uncaughtException', (error) => {\n      logger.error('Uncaught Exception:', error);\n      shutdownHandler('uncaughtException');\n    });\n\n    process.on('unhandledRejection', (reason, promise) => {\n      logger.error(`Unhandled Rejection: ${reason.stack || reason}`);\n      shutdownHandler('unhandledRejection');\n    });\n  } catch (error) {\n    if (logger) {\n      logger.error('❌ Failed to start X Scraper:', error);\n    } else {\n      console.error('❌ Failed to start X Scraper:', error);\n    }\n\n    if (container) {\n      try {\n        await container.dispose();\n      } catch (disposeError) {\n        console.error('Error during cleanup:', disposeError);\n      }\n    }\n\n    // Don't call process.exit here - let the caller handle it\n    throw error;\n  }\n}\n\n// Only run when executed directly (not imported)\nif (import.meta.url === pathToFileURL(process.argv[1]).href) {\n  main().catch((error) => {\n    console.error('Fatal error:', error);\n    process.exit(1);\n  });\n}\n\n// Export for testing and integration\nexport { main };\n"],"mappings":"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","ignoreList":[]}